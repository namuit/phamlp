# Introduction #

PHamlP provides some helper methods to make it easier to do various tasks.

The HamlHelpers class can be extended to provide user defined helper methods. The signature for user defined helper methods is ($block, $other, $arguments); $block is the string generated by the Haml block being operated on.

The path to the extended class is provided to HamlParser in the config array; class name == file name.

HamlHelpers and any extended class are automatically included in the context that a Haml template is parsed in, so all the methods are at your disposal from within the template.

Helpers are used within a template like a function and act on a block of Haml code (html\_attr() is the exception). e.g.

```
= prepend('*')
  %strong Strong text
```
produces
```
*<strong>Strong text</strong>
```

# Methods #
**append($string)**
Appends string to the block

**escape\_once()**
Escapes HTML entities in text, but without escaping an ampersand that is already part of an escaped entity.

**html\_attrs($language = 'en-us', $lang = true)**
Returns an array containing default assignments for the xmlns, lang, and xml:lang attributes of the html element. This helper method is for use in the html element only.
Examples:
```
%html(html_attrs())
```
produces
```
<html lang="en-us" xml:lang="en-us" xmlns="http://www.w3.org/1999/xhtml">
```
```
%html(html_attrs('en-gb'))
```
produces
```
<html lang="en-gb" xml:lang="en-gb" xmlns="http://www.w3.org/1999/xhtml">
```
```
%html(html_attrs('en-gb', false))
```
produces
```
<html xml:lang="en-gb" xmlns="http://www.w3.org/1999/xhtml">
```

Although handled in HamlParser, the notes below are here for completeness.

Other attributes are defined as normal. e.g.
```
%html(xmlns:me="http://www.example.com/me" html_attrs('en-gb', false))
```
produces
```
<html xml:lang="en-gb" xmlns="http://www.w3.org/1999/xhtml" xmlns:me="http://www.example.com/me">
```

PHamlP also allows for the language to be defined using PHP code that can  be eval'd; the code must end with a semi-colon (;). e.g.
```
%html(html_attrs("FW::app()->language);", false))
```
produces (assuming FW::app()->language returns 'en-gb')
```
<html xml:lang="en-gb" xmlns="http://www.w3.org/1999/xhtml">
```

**html\_escape()**
Returns a copy of text with ampersands, angle brackets and quotes escaped into HTML entities.

**list\_of($block, $items, $key, $value = null)**
Iterates an array and using the block to generate a `<li>` element for each array element.
Examples:
```
 = list_of(array('red', 'orange', ...., 'violet'), 'colour')<br/>
   = colour
```
Produces:
```
<li>red</li>
<li>orange</li>
    |
    |
<li>violet></li>
```
And
```
= list_of(array('Fly Fishing' => 'JR Hartley', 'Lord of the Rings' => 'JRR Tolkien'), 'title', 'author')
  %h3= title
  %p= author
```
Produces:
```
<li><br/>
  <h3>Fly Fishing</h3>
  <p>JR Hartley</p>
</li>
<li>
  <h3>Lord of the Rings</h3>
  <p>JRR Tolkien</p>
</li>
```

**preceed($string)**
Alias for prepend.

**prepend($string)**
Returns the block with string prepended.

**preserve()**
Converts newlines in the block to HTML entities.

**succeed($string)**
Alias for append.

**surround($front, $back=null)**
Surrounds a block of Haml code with strings. If $back is not given it defaults to $front.